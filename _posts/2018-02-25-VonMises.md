---
layout: post
title:  "VonMises"
date:   2018-02-25
tags: [Plasticity, Julia]
---


Plot function:
{% highlight julia%}
#------------------------------------------------------------------------------
function write_result(file::IOStream, σ::Vector, ɛ::Vector, ɛᵖ::Vector)
    σ_matrix = [σ[1]   σ[4]   σ[6];
                σ[4]   σ[2]   σ[5];
                σ[6]   σ[5]   σ[3]] 
    p     = trace(σ_matrix)/3
    S     = σ_matrix - p * eye(3)                                       # Note: σ[3,3]
    q     = √(3/2) * vecnorm(S)
    ɛᵥ    = sum(ɛ)
    σeq   = √(3/2) * vecnorm(S)
    write(file,"$p,$q,$(q/p),$ɛᵥ,$(σ[1]),$(σ[2]),$(σ[3]),$(ɛ[1]),$(ɛ[2]),$(ɛ[3]), $(σeq)\n")
end
#------------------------------------------------------------------------------
function simulate(cond,Dep::Matrix, dɛ::Vector, dσ::Vector)
    if cond == "Isotropic"
        dɛ[3] = (Dep[2,1]*dσ[1] - Dep[1,1]*dσ[2] )/(Dep[2,1] * (Dep[1,2] + Dep[1,3]) - Dep[1,1] * (Dep[2,2] + Dep[2,3]))
        dɛ[2] = dɛ[3]
        dɛ[1] = (dσ[1] - (Dep[1,2] + Dep[1,3]) * dɛ[3])/Dep[1,1] 
    elseif cond == "Oedometer_stress"
         dɛ[1] = dσ[1] /Dep[1,1]
        dɛ[2] = 0
        dɛ[3] = 0
        dσ[2] = Dep[2,1]*dɛ[1]  
        dσ[3] = dσ[2]
  elseif cond == "Oedometer_strain"
        dσ[1] = dɛ[1] * Dep[1,1]
        dɛ[2] = 0
        dɛ[3] = 0
        dσ[2] = Dep[2,1]*dɛ[1]  
        dσ[3] = dσ[2]

    end
    return dσ, dɛ
end
{% endhighlight %}

Plot function:
{% highlight julia%}
using DataFrames
using PyPlot

function plotfig()
    data = readtable("output.csv") 
    figure()
    plot(data[:ɛ1], data[:σeq], linestyle = "-",color="blue", label = "Soil state" )
    xlabel(L"ɛ_a")
    ylabel(L"σeq")
    grid("on")
    savefig("Figure_Iso")
end
main()
plotfig()
{% endhighlight %}

